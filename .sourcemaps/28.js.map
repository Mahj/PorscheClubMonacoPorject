{"version":3,"sources":["../../src/pages/components/places/list-map/list-map.module.ts","../../src/pages/components/places/list-map/list-map.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACI;AACG;AAahD,IAAa,qBAAqB;IAAlC;IAAoC,CAAC;IAAD,4BAAC;AAAD,CAAC;AAAxB,qBAAqB;IAXjC,+DAAQ,CAAC;QACR,YAAY,EAAE;YACV,kEAAe;SAClB;QACD,OAAO,EAAE;YACL,sEAAe,CAAC,QAAQ,CAAC,kEAAe,CAAC;SAC5C;QACD,OAAO,EAAE;YACL,kEAAe;SAClB;KACF,CAAC;GACW,qBAAqB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;ACf6B;AAC6B;AACtB;AACvC,CAAC,8DAA8D;AACnB;AAQ3E,IAAa,eAAe;IAe1B,yBAAmB,OAAsB,EAAS,SAAoB,EAAS,WAA8B,EAAS,QAAwB,EAAS,IAAyB,EACrK,EAAoB;QADZ,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAAS,gBAAW,GAAX,WAAW,CAAmB;QAAS,aAAQ,GAAR,QAAQ,CAAgB;QAAS,SAAI,GAAJ,IAAI,CAAqB;QACrK,OAAE,GAAF,EAAE,CAAkB;QAZ/B,UAAK,GAAU,EAAE,CAAC;QAGlB,mBAAc,GAAY,KAAK,CAAC;QAChC,8DAA8D;QAC9D,8DAA8D;QAC9D,8DAA8D;QAC9D,aAAQ,GAAQ,CAAC,EAAC,aAAa,EAAC,oBAAoB,EAAC,aAAa,EAAC,KAAK,EAAC,SAAS,EAAC,CAAC,EAAC,OAAO,EAAC,SAAS,EAAC,EAAC,EAAC,WAAW,EAAC,GAAG,EAAC,EAAC,EAAC,OAAO,EAAC,GAAG,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,UAAU,EAAC,aAAa,EAAC,eAAe,EAAC,SAAS,EAAC,CAAC,EAAC,OAAO,EAAC,SAAS,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,MAAM,EAAC,aAAa,EAAC,KAAK,EAAC,SAAS,EAAC,CAAC,EAAC,QAAQ,EAAC,MAAM,EAAC,EAAC,EAAC,OAAO,EAAC,KAAK,EAAC,EAAC,EAAC,YAAY,EAAC,GAAG,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,MAAM,EAAC,aAAa,EAAC,eAAe,EAAC,SAAS,EAAC,CAAC,EAAC,KAAK,EAAC,SAAS,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,eAAe,EAAC,aAAa,EAAC,eAAe,EAAC,SAAS,EAAC,CAAC,EAAC,WAAW,EAAC,GAAG,EAAC,EAAC,EAAC,OAAO,EAAC,GAAG,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,yBAAyB,EAAC,aAAa,EAAC,KAAK,EAAC,SAAS,EAAC,CAAC,EAAC,KAAK,EAAC,SAAS,EAAC,EAAC,EAAC,YAAY,EAAC,IAAI,EAAC,EAAC,EAAC,WAAW,EAAC,IAAI,EAAC,EAAC,EAAC,OAAO,EAAC,MAAM,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,OAAO,EAAC,aAAa,EAAC,KAAK,EAAC,SAAS,EAAC,CAAC,EAAC,OAAO,EAAC,SAAS,EAAC,CAAC,EAAC,CAAC,CAAC;QAE7uB,gBAAW,GAAM,EAAE,CAAC;QAKhB,IAAI,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACvC,OAAO,EAAE,UAAU;YACnB,OAAO,EAAE,EAAE;SACd,CAAC,CAAC;QACH,YAAY,CAAC,OAAO,EAAE,CAAC;QAEvB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;QACnD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAE3C,IAAI,IAAI,GAAG,IAAI,CAAC;QAGhB,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YAChB,EAAE,CAAC,uBAAuB,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAU,EAAE,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC;iBACpE,IAAI,CAAC,UAAU,CAAC;gBACb,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACN,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;gBACnB,CAAC;gBACD,IAAI,CAAC,gBAAgB,EAAE,CAAC;gBACxB,YAAY,CAAC,OAAO,EAAE;YAC1B,CAAC,CAAC,CAAC;QACX,CAAC;QACD,IAAI,CAAC,CAAC;YACF,EAAE,CAAC,kBAAkB,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC;iBAClD,IAAI,CAAC,UAAU,CAAC;gBACb,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACN,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;gBACnB,CAAC;gBACD,IAAI,CAAC,gBAAgB,EAAE,CAAC;gBACxB,YAAY,CAAC,OAAO,EAAE;YAC1B,CAAC,CAAC,CAAC;QACX,CAAC;IACL,CAAC;IAID,0CAAgB,GAAhB;QACE,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,kBAAkB,EAAE,kBAAkB,CAAC,CAAC;QAC5E,IAAI,UAAU,GAAG;YACb,MAAM,EAAE,MAAM;YACd,IAAI,EAAE,EAAE;YACR,MAAM,EAAE,IAAI,CAAC,QAAQ;YACrB,SAAS,EAAE,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO;YACxC,gBAAgB,EAAE,IAAI;SACzB,CAAC;QACF,IAAI,CAAC,GAAG,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,UAAU,CAAC,CAAC;QAC1E,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC;IAClC,CAAC;IAGD,yCAAe,GAAf,UAAgB,IAAI;QAApB,iBAQC;QAPG,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC1B,IAAI,CAAC,OAAO,CAAC,UAAC,CAAC;gBACX,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YACrB,CAAC,CAAC,CAAC;QACP,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QACxB,CAAC;IACL,CAAC;IAED,kCAAQ,GAAR,UAAS,IAAI;QACT,IAAI,QAAQ,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;QAC1D,IAAI,SAAS,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YACnC,QAAQ,EAAE,QAAQ;YAClB,SAAS,EAAE,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI;YACrC,cAAc,EAAE,IAAI;YACpB,KAAK,EAAE,IAAI,CAAC,IAAI;YAChB,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,GAAG,EAAE,IAAI,CAAC,GAAG;YACb,KAAK,EAAE,IAAI,CAAC,KAAK;YAEjB,kCAAkC;YAClC,kCAAkC;YAClC,IAAI,EAAE;gBACF,GAAG,EAAE,yBAAyB;gBAC9B,sBAAsB;gBACtB,IAAI,EAAE,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC;gBAClC,8DAA8D;gBAC9D,UAAU,EAAE,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC;gBACxC,0EAA0E;gBAC1E,MAAM,EAAE,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;gBACnC,+IAA+I;gBAC/I,MAAM,EAAE,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,EAAE,EAAE,CAAC;gBACrC,WAAW,EAAE,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,EAAE,EAAE,CAAC;aAC7C;YACD,WAAW,EAAE,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;SAC7C,CAAC,CAAC;QACH,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC3B,IAAI,CAAC,qBAAqB,CAAC,SAAS,CAAC,CAAC;QACtC,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;IACjC,CAAC;IAMD,+CAAqB,GAArB,UAAsB,MAAM;QAA5B,iBA4BC;QA1BG,IAAI,iBAAiB,GAAG,yBAAyB;YACrB,0BAA0B;YACpB,2BAA2B,GAAC,MAAM,CAAC,KAAK,GAAC,QAAQ;YACjD,oBAAoB,GAAC,MAAM,CAAC,KAAK,GAAC,oBAAoB,GAAC,MAAM,CAAC,KAAK,GAAC,sBAAsB,GAAC,MAAM,CAAC,GAAG,GAAC,MAAM;YAClH,QAAQ;YACR,gDAAgD;YACpD,QAAQ,CAAC;QAEjC,IAAI,UAAU,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;QAC1C,0BAA0B;QAC1B,2BAA2B;QAC3B,OAAO;QACP,UAAU,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC;QAEzC,MAAM,CAAC,WAAW,CAAC,OAAO,EAAE;YACtB,KAAI,CAAC,mBAAmB,EAAE,CAAC;YAC3B,UAAU,CAAC,IAAI,CAAC,KAAI,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;YAClC,mEAAmE;YACnE,gEAAgE;YAChE,qFAAqF;YACrF,2BAA2B;YAC3B,QAAQ;YACR,OAAO;QAEb,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IAC1C,CAAC;IAED,qCAAW,GAAX;QACE,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;IAC7B,CAAC;IAED,6CAAmB,GAAnB;QACI,GAAG,EAAe,UAAgB,EAAhB,SAAI,CAAC,WAAW,EAAhB,cAAgB,EAAhB,IAAgB;YAA9B,IAAI,QAAM;YACZ,QAAM,CAAC,KAAK,EAAE,CAAC;SAChB;IACL,CAAC;IAGD,iCAAO,GAAP;QACC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;IACzB,CAAC;IAEH,sBAAC;AAAD,CAAC;AA7JmB;IAAjB,gEAAS,CAAC,KAAK,CAAC;8BAAa,yDAAU;mDAAC;AAF9B,eAAe;IAJ3B,gEAAS,CAAC;QACT,QAAQ,EAAE,eAAe;OACG;KAC7B,CAAC;gGAgBgL;QACjK,YAAgB;AA+IhC;SA/JY,eAAe,Y","file":"28.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CityListMapPage } from './list-map';\nimport { IonicPageModule } from 'ionic-angular';\n\n@NgModule({\n  declarations: [\n      CityListMapPage,\n  ],\n  imports: [\n      IonicPageModule.forChild(CityListMapPage),\n  ],\n  exports: [\n      CityListMapPage\n  ]\n})\nexport class CityListMapPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/places/list-map/list-map.module.ts","import { Component,ViewChild,ElementRef } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController,ViewController } from 'ionic-angular';\nimport { AngularFireDatabase} from 'angularfire2/database-deprecated';\nimport 'rxjs/add/operator/map'; // you might need to import this, or not depends on your setup\nimport { DatabaseProvider } from '../../../../providers/database/database';\ndeclare var google;\n\n@IonicPage({\n    name: \"CityListMapPage\",\n    segment: \"places-list-map\"\n})\n@Component({\n  selector: 'page-list-map',\n  templateUrl: 'list-map.html'\n})\nexport class CityListMapPage {\n    subDoc: any;\n  @ViewChild('map') mapElement: ElementRef;\n  categoryId:any\n  items: any[] = [];\n\n  map: any;\n  markerSelected: boolean = false;\n  //******************** Map style  **************************//\n  //***** go to snazzymaps.com for more map style  ***********//\n  //**********************************************************//\n  mapStyle: any = [{\"featureType\":\"landscape.man_made\",\"elementType\":\"all\",\"stylers\":[{\"color\":\"#faf5ed\"},{\"lightness\":\"0\"},{\"gamma\":\"1\"}]},{\"featureType\":\"poi.park\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#bae5a6\"}]},{\"featureType\":\"road\",\"elementType\":\"all\",\"stylers\":[{\"weight\":\"1.00\"},{\"gamma\":\"1.8\"},{\"saturation\":\"0\"}]},{\"featureType\":\"road\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"hue\":\"#ffb200\"}]},{\"featureType\":\"road.arterial\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"lightness\":\"0\"},{\"gamma\":\"1\"}]},{\"featureType\":\"transit.station.airport\",\"elementType\":\"all\",\"stylers\":[{\"hue\":\"#b000ff\"},{\"saturation\":\"23\"},{\"lightness\":\"-4\"},{\"gamma\":\"0.80\"}]},{\"featureType\":\"water\",\"elementType\":\"all\",\"stylers\":[{\"color\":\"#a0daf2\"}]}];\n\n  infoWindows: any=[];\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, public loadingCtrl: LoadingController, public viewCtrl: ViewController, public afDB: AngularFireDatabase,\n      public db: DatabaseProvider) {\n\n      let loadingPopup = this.loadingCtrl.create({\n          spinner: 'crescent',\n          content: ''\n      });\n      loadingPopup.present();\n\n      this.categoryId = this.navParams.get('categoryId');\n      this.subDoc = this.navParams.get('subDoc');\n\n      let that = this;\n\n\n      if (!!this.subDoc) {\n          db.getSubCategoryDocByname('places', this.categoryId, 'sub', this.subDoc)\n              .then(function (e) {\n                  if (!!e) {\n                      that.items = e;\n                  }\n                  that.displayGoogleMap();\n                  loadingPopup.dismiss()\n              });\n      }\n      else {\n          db.getSubCategoryDocs('places', this.categoryId, 'sub')\n              .then(function (e) {\n                  if (!!e) {\n                      that.items = e;\n                  }\n                  that.displayGoogleMap();\n                  loadingPopup.dismiss()\n              });\n      }\n  }\n\n\n\n  displayGoogleMap() {\n    let latLng = new google.maps.LatLng(13.801532791932946, 100.54677690766607);\n    let mapOptions = {\n        center: latLng,\n        zoom: 18,\n        styles: this.mapStyle,\n        mapTypeId: google.maps.MapTypeId.ROADMAP,\n        disableDefaultUI: true\n    };\n    this.map = new google.maps.Map(this.mapElement.nativeElement, mapOptions);\n    this.addMarkersToMap(this.items)\n  }\n\n\n  addMarkersToMap(item) {\n      if (item && item.length > 0) {\n          item.forEach((i) => {\n              this.setupMap(i);\n          });\n      } else {\n          this.setupMap(item);\n      }\n  }\n\n  setupMap(item) {\n      var position = new google.maps.LatLng(item.lat, item.lng);\n      var mapMarker = new google.maps.Marker({\n          position: position,\n          animation: google.maps.Animation.DROP,\n          markerSelected: true,\n          title: item.name,\n          email: item.email,\n          web: item.web,\n          phone: item.phone,\n\n          //**** Custom Marker Symbols ****/\n          //icon:  'assets/red_pin72x96.png'\n          icon: {\n              url: 'assets/red_pin72x96.png',\n              //The size image file.\n              size: new google.maps.Size(72, 96),\n              // we want to render @ 30x30 logical px (@2x dppx or 'Retina')\n              scaledSize: new google.maps.Size(40, 52),\n              //The point on the image to measure the anchor from. 0, 0 is the top left.\n              origin: new google.maps.Point(0, 0),\n              //The x y coordinates of the anchor point on the marker. e.g. If your map marker was a drawing pin then the anchor would be the tip of the pin.\n              anchor: new google.maps.Point(20, 40),\n              labelOrigin: new google.maps.Point(20, 12)\n          },\n          anchorPoint: new google.maps.Point(0, -40)\n      });\n      mapMarker.setMap(this.map);\n      this.addInfoWindowToMarker(mapMarker);\n      this.map.setCenter(position);\n  }\n\n\n\n\n\n  addInfoWindowToMarker(marker) {\n\n      var infoWindowContent = '<div id=\"iw-container\">' +               \n                                  '<div class=\"iw-content\">' +\n                                        '<div class=\"iw-subTitle\">'+marker.title+'</div>' +                                  \n                                        '<br><b>Phone:</b> '+marker.phone+'<br><b>E-mail:</b>'+marker.email+'<br><b>Website:</b> '+marker.web+'</p>'+\n                                  '</div>' +\n                                  //'<div id=\"do-something-button\">button</div>' +\n                              '</div>';    \n\n      var infoWindow = new google.maps.InfoWindow();\n          // infoWindow.setOptions({\n          //     disableAutoPan:false\n          // }); \n          infoWindow.setContent(infoWindowContent);\n\n          marker.addListener('click', () => {\n                this.closeAllInfoWindows();\n                infoWindow.open(this.map, marker);\n                // add listener that will capture the click event of the infoWindow\n                // google.maps.event.addListener(infoWindow, 'domready', () => {\n                //   document.getElementById('do-something-button').addEventListener('click', () => {\n                //      this.doSomething();\n                //   });\n                // }); \n\n          });\n          this.infoWindows.push(infoWindow);\n  }\n\n  doSomething(){\n    console.log(\"doSomething\");\n  }\n\n  closeAllInfoWindows() {\n      for(let window of this.infoWindows) { \n        window.close();\n      }\n  }\n \n\n  dismiss() {\n   this.viewCtrl.dismiss();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/places/list-map/list-map.ts"],"sourceRoot":""}