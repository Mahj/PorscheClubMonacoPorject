{"version":3,"sources":["../../src/pages/components/login-workflow/login/login.module.ts","../../src/pages/components/login-workflow/login/login.ts"],"names":[],"mappings":"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","file":"39.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n  ],\n  exports: [\n    LoginPage\n  ]\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/login-workflow/login/login.module.ts","import { Component } from '@angular/core';\nimport { NavController, LoadingController, AlertController, IonicPage } from 'ionic-angular';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { GooglePlus } from '@ionic-native/google-plus';\nimport { Facebook, FacebookLoginResponse } from '@ionic-native/facebook';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { webClientId } from '../../../../config/config';\nimport { AuthData } from '../../../../providers/auth-data';\nimport firebase from 'firebase';\n\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html'\n})\nexport class LoginPage {\n  hideSocialButtons: boolean;\n  public loginForm: any;\n  data: any;\n  dataFb: any;\n\n  constructor(public navCtrl: NavController, public authData: AuthData, public fb: FormBuilder, public alertCtrl: AlertController, public loadingCtrl: LoadingController, public googlePlus: GooglePlus, private fbook: Facebook, public afAuth: AngularFireAuth) {\n    let EMAIL_REGEXP = /^[a-z0-9!#$%&'*+\\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i;\n    this.loginForm = fb.group({\n      email: ['', Validators.compose([Validators.required, Validators.pattern(EMAIL_REGEXP)])],\n      password: ['', Validators.compose([Validators.minLength(6), Validators.required])]\n    });\n  }\n\n  login() {\n    if (!this.loginForm.valid) {\n      this.presentAlert('Username or password is incorrect')\n      console.log(\"error\");\n    } else {\n      let loadingPopup = this.loadingCtrl.create({\n        spinner: 'crescent',\n        content: ''\n      });\n      loadingPopup.present();\n\n      this.authData.loginUser(this.loginForm.value.email, this.loginForm.value.password)\n        .then(authData => {\n          console.log(\"Auth pass\");\n          loadingPopup.dismiss();\n          this.navCtrl.push('AfterLoginPage', { data: authData });\n        }, error => {\n          var errorMessage: string = error.message;\n          loadingPopup.dismiss().then(() => {\n            this.presentAlert(errorMessage)\n          });\n        });\n    }\n  }\n\n  recover() {\n    this.navCtrl.push('RecoverPage');\n  }\n\n  createAccount() {\n    this.navCtrl.push('RegisterPage');\n  }\n\n  presentAlert(title) {\n    let alert = this.alertCtrl.create({\n      title: title,\n      buttons: ['OK']\n    });\n    alert.present();\n  }\n\n\n  //----social login------------------------------\n  loginWithFb() {\n    let that = this;\n    this.fbook.login(['public_profile', 'user_friends', 'email'])\n      .then((res: FacebookLoginResponse) => {\n        that.dataFb = res;\n        that.data = null;//remove g+ data\n\n\n        const facebookCredential = firebase.auth.FacebookAuthProvider\n          .credential(res.authResponse.accessToken);\n\n        firebase.auth().signInWithCredential(facebookCredential)\n          .then(response => {\n            //alert(\"Firebase success: \" + JSON.stringify(response));\n            firebase.database().ref('/userProfile').child(response.uid).set({\n              email: response.email,\n              name: response.displayName,\n              pic: response.photoURL,\n            });\n            this.navCtrl.push('AfterLoginPage', { data: response })\n          });\n\n\n      })\n      .catch(e => console.log('Error logging into Facebook', e));\n  }\n\n  loginWithGooglePlus() {\n    let that = this;\n    this.googlePlus.login({\n      'webClientId': webClientId,\n      'offline': true\n    })\n      .then(res => {\n        //logged in\n        that.data = res;\n        that.dataFb = null; //remove fb data\n\n        const googleCredential = firebase.auth.GoogleAuthProvider\n          .credential(res.idToken);\n\n        firebase.auth().signInWithCredential(googleCredential)\n          .then(response => {\n            //alert(\"Firebase success: \" + JSON.stringify(response));\n            firebase.database().ref('/userProfile').child(response.uid).set({\n              email: response.email,\n              name: response.displayName,\n              pic: response.photoURL,\n            });\n            this.navCtrl.push('AfterLoginPage', { data: response })\n\n          });\n\n      })\n      .catch(err => {\n        alert(\"There is an error \" + JSON.stringify(err));\n      });\n  }\n\n  logout() {\n    let that = this;\n    this.googlePlus.logout().then(() => {\n      alert(\"Logged out\");\n      that.data = null;\n    })\n  }\n\n  logoutFb() {\n    let that = this;\n    this.fbook.logout().then(() => {\n      alert(\"Logged out\");\n      that.dataFb = null;\n    })\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad NativeLoginPage');\n    if (!(<any>window).cordova) {\n      // running on desktop browser\n      this.hideSocialButtons = true;\n    }\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/login-workflow/login/login.ts"],"sourceRoot":""}