{"version":3,"sources":["../../src/pages/components/cart/payment/payment.module.ts","../../src/pages/components/cart/payment/payment.ts"],"names":[],"mappings":"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","file":"49.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PaymentPage } from './payment';\n\n@NgModule({\n  declarations: [\n    PaymentPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(PaymentPage),\n  ],\n  exports: [\n    PaymentPage\n  ]\n})\nexport class PaymentPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/cart/payment/payment.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController, ToastController } from 'ionic-angular';\nimport { PayPal, PayPalPayment, PayPalConfiguration } from '@ionic-native/paypal';\nimport { DatabaseProvider } from \"../../../../providers/database/database\";\nimport { payPalEnvironmentSandbox } from \"../../../../config/config\";\n/**\n * Generated class for the PaymentPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n@IonicPage()\n@Component({\n  selector: 'page-payment',\n  templateUrl: 'payment.html',\n})\nexport class PaymentPage {\n    email: any;\n    name: any;\n    cartItems: any;\n    total: any;\n\n    constructor(public navCtrl: NavController, public navParams: NavParams, private payPal: PayPal, public alertCtrl: AlertController, public db: DatabaseProvider, private toastCtrl: ToastController) {\n\n        this.total = this.navParams.get('total');\n        this.cartItems = this.navParams.get('items');\n        this.name = this.navParams.get('name');\n        this.email = this.navParams.get('email');\n  }\n\n    payWtihPaypal() {\n        this.payPal.init({\n            PayPalEnvironmentProduction: 'YOUR_PRODUCTION_CLIENT_ID',\n            PayPalEnvironmentSandbox: payPalEnvironmentSandbox//YOUR_SANDBOX_CLIENT_ID\n        }).then(() => {\n            // Environments: PayPalEnvironmentNoNetwork, PayPalEnvironmentSandbox, PayPalEnvironmentProduction\n            this.payPal.prepareToRender('PayPalEnvironmentSandbox', new PayPalConfiguration({\n                // Only needed if you get an \"Internal Service Error\" after PayPal login!\n                //payPalShippingAddressOption: 2 // PayPalShippingAddressOptionPayPal\n            })).then(() => {\n                let payment = new PayPalPayment(this.total, 'USD', 'Description', 'sale');\n                this.payPal.renderSinglePaymentUI(payment).then(() => {\n                    // Successfully paid\n\n                    // Example sandbox response\n                    //\n                    // {\n                    //   \"client\": {\n                    //     \"environment\": \"sandbox\",\n                    //     \"product_name\": \"PayPal iOS SDK\",\n                    //     \"paypal_sdk_version\": \"2.16.0\",\n                    //     \"platform\": \"iOS\"\n                    //   },\n                    //   \"response_type\": \"payment\",\n                    //   \"response\": {\n                    //     \"id\": \"PAY-1AB23456CD789012EF34GHIJ\",\n                    //     \"state\": \"approved\",\n                    //     \"create_time\": \"2016-10-03T13:33:33Z\",\n                    //     \"intent\": \"sale\"\n                    //   }\n                    // }\n                }, () => {\n                    // Error or render dialog closed without being successful\n                    this.precentAlert('Alert', 'Error or render dialog closed without being successful')\n                });\n            }, () => {\n                // Error in configuration\n                this.precentAlert('Alert', 'Error in configuration');\n            });\n        }, () => {\n            // Error in initialization, maybe PayPal isn't supported or something else\n            this.precentAlert('Alert', 'Error in initialization, PayPal isn\\'t supported on the browser, please run the app on a mobile device');\n        });\n    }\n\n    precentAlert(title, text) {\n        let prompt = this.alertCtrl.create({\n            title: title,\n            message: text,\n\n            buttons: [\n                {\n                    text: 'Ok',\n                    handler: data => {\n                       \n                    }\n                }\n            ]\n        });\n        prompt.present();\n    }\n\n    payCash() {\n        this.markItemsAsBought();\n    }\n\n    markItemsAsBought() {\n        \n        let total = this.cartItems.length-1;\n\n        this.cartItems.forEach((e, i) => {\n            e.bought = true;\n            e.boughtDate = this.getDate();\n            this.db.updateDocument('cart', e.$key, e).then((c) => {\n                if (i == total) {\n                    const toast = this.toastCtrl.create({\n                        message: 'Items succesfully bought',\n                        position: 'bottom',\n                        duration: 3000\n                    });\n                    toast.present();\n                    this.navCtrl.push('CartPage', {goToHistory: true});\n\n                }\n            });\n        });\n    }\n\n    getDate() {\n        var currentDate = new Date()\n        var day = currentDate.getDate()\n        var month = currentDate.getMonth() + 1\n        var year = currentDate.getFullYear()\n        return month + \"/\" + day + \"/\" + year;\n    }\n\n    payWtihStripe() {\n        this.navCtrl.push('StripePage', {total: this.total, email: this.email, name: this.name });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/cart/payment/payment.ts"],"sourceRoot":""}