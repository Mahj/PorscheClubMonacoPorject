{"version":3,"sources":["../../src/pages/components/weather/weather.ts","../../src/pages/components/weather/weather.module.ts"],"names":[],"mappings":"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","file":"10.js","sourcesContent":["import { Component, ViewChild, ElementRef } from '@angular/core';\nimport { NavController, LoadingController, Platform, IonicPage } from 'ionic-angular';\nimport { Http } from '@angular/http';\nimport { } from 'bingmaps';\n\n@IonicPage()\n@Component({\n    selector: 'page-weather',\n    templateUrl: 'weather.html'\n})\nexport class WeatherPage {\n\n    isStatic: boolean = false;\n    @ViewChild('map') mapElement: ElementRef;\n\n    temp: number;\n\n    weatherInfo: any = {};\n    cityName: string = \"Miami, US\";\n    weatherTaps: string = \"info\"\n\n    constructor(public navCtrl: NavController, public http: Http, public loadingCtrl: LoadingController, public platform: Platform) {\n        this.platform = platform;\n    }\n\n    ionViewDidEnter() {\n        this.getDataWhenPlatformIsReady();\n    }\n\n    runMaps() {\n        let that = this;\n        setTimeout(function () {\n            if (that.isStatic) {\n                that.generateBingMap(that.weatherInfo.coord.lon, that.weatherInfo.coord.lat);\n            } else {\n                that.getBingAnimatedMap(that.weatherInfo.coord.lon, that.weatherInfo.coord.lat);\n            }\n        }, 400);\n    }\n\n    getData() {\n        let loading = this.loadingCtrl.create();\n        loading.present();\n        this.http.get(\"https://api.openweathermap.org/data/2.5/weather?q=\" + this.cityName + \"&appId=53591a412c95932221df665561b01151\").subscribe((data) => {\n            console.log(data.json())\n            this.weatherInfo = data.json();\n            this.temp = Math.round(9 / 5 * (parseInt(this.weatherInfo.main.temp) - 273.15) + 32); //temp is in kelvin, used formula to convert it to fahrenheit\n\n            if(this.weatherTaps == 'maps'){\n                this.runMaps();\n            }\n\n            loading.dismiss();\n        }, (error) => {\n            console.log(error);\n            alert(error.statusText)\n            loading.dismiss();\n        })\n    }\n\n    generateBingMap(lon, lat) {\n        //http://mesonet.agron.iastate.edu/ogc/\n        var map = new Microsoft.Maps.Map(this.mapElement.nativeElement, {\n            /* No need to set credentials if already passed in URL */\n            credentials: 'AnbpfmCAAYuHBlPdsVikFSVd9Ey8v4v8_2ByXc7BzTKDu2a9_x8-aPLFa5dqK0Uu',\n            center: new Microsoft.Maps.Location(lat, lon),\n            zoom: 7\n        });\n        // weather radar tiles from Iowa Environmental Mesonet of Iowa State University\n        var weatherTileSource = new Microsoft.Maps.TileSource({\n            uriConstructor: 'https://mesonet.agron.iastate.edu/cache/tile.py/1.0.0/nexrad-n0q-900913/{zoom}/{x}/{y}.png'\n        });\n        var weatherTileLayer = new Microsoft.Maps.TileLayer({\n            mercator: weatherTileSource,\n        });\n        map.layers.insert(weatherTileLayer);\n    }\n\n    getBingAnimatedMap(lon, lat) {\n        //http://mesonet.agron.iastate.edu/ogc/\n        var map = new Microsoft.Maps.Map(this.mapElement.nativeElement, {\n            /* No need to set credentials if already passed in URL */\n            credentials: 'AnbpfmCAAYuHBlPdsVikFSVd9Ey8v4v8_2ByXc7BzTKDu2a9_x8-aPLFa5dqK0Uu',\n            center: new Microsoft.Maps.Location(lat, lon),\n            zoom: 7\n        });\n        var urlTemplate = 'https://mesonet.agron.iastate.edu/cache/tile.py/1.0.0/nexrad-n0q-{timestamp}/{zoom}/{x}/{y}.png';\n        var timestamps = ['900913-m50m', '900913-m45m', '900913-m40m', '900913-m35m', '900913-m30m', '900913-m25m', '900913-m20m', '900913-m15m', '900913-m10m', '900913-m05m', '900913'];\n        var tileSources = [];\n        for (var i = 0; i < timestamps.length; i++) {\n            var tileSource = new Microsoft.Maps.TileSource({\n                uriConstructor: urlTemplate.replace('{timestamp}', timestamps[i])\n            });\n            tileSources.push(tileSource);\n        }\n        var animatedLayer = new Microsoft.Maps.AnimatedTileLayer({ mercator: tileSources, frameRate: 500 });\n        map.layers.insert(animatedLayer);\n    }\n\n    getDataWhenPlatformIsReady() {\n        let that = this;\n        this.platform.ready().then(() => {\n            that.getData();\n        })\n    }\n\n    updateItem(item) {\n        console.log(this.isStatic);\n        this.runMaps();\n    }\n\n    getDeviceLocation() {\n        this.platform.ready().then(() => {\n            navigator.geolocation.getCurrentPosition((location) => {\n                if (!!location) {\n                    if (this.weatherTaps == 'maps') {\n                        if (this.isStatic) {\n                            this.generateBingMap(location.coords.longitude, location.coords.latitude);\n                        } else {\n                            this.getBingAnimatedMap(location.coords.longitude, location.coords.latitude);\n                        }\n                    }\n                } else {\n                    alert(\"Couldn't access device location\");\n                }\n            });\n        });\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/weather/weather.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { WeatherPage } from './weather';\n\n@NgModule({\n  declarations: [\n    WeatherPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(WeatherPage),\n  ],\n  exports: [\n    WeatherPage\n  ]\n})\nexport class WeatherPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/weather/weather.module.ts"],"sourceRoot":""}