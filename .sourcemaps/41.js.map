{"version":3,"sources":["../../src/pages/components/login-workflow/login-pwa/login.module.ts","../../src/pages/components/login-workflow/login-pwa/login.ts"],"names":[],"mappings":"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","file":"41.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPwaPage } from './login';\n\n@NgModule({\n  declarations: [\n      LoginPwaPage,\n  ],\n  imports: [\n      IonicPageModule.forChild(LoginPwaPage),\n  ],\n  exports: [\n      LoginPwaPage\n  ]\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/login-workflow/login-pwa/login.module.ts","import { Component } from '@angular/core';\nimport { NavController, LoadingController, AlertController, IonicPage, Platform } from 'ionic-angular';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { AuthService } from '../../../../providers/auth-pwa/auth.service';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { DatabaseProvider } from \"../../../../providers/database/database\";\nimport { imagesSlide } from \"../../../../config/config\";\n\ndeclare var $;\n@IonicPage({\n    name: 'LoginPwaPage',\n    segment: 'login-pwa'\n})\n\n@Component({\n  selector: 'page-login-pwa',\n  templateUrl: 'login.html'\n})\nexport class LoginPwaPage {\n  hideSocialButtons: boolean;\n  public loginForm: any;\n  data: any;\n  dataFb: any;\n\n    constructor(public navCtrl: NavController, public auth: AuthService, public fb: FormBuilder, public alertCtrl: AlertController, public loadingCtrl: LoadingController,\n        public afAuth: AngularFireAuth, private db: DatabaseProvider, private platform: Platform) {\n    let EMAIL_REGEXP = /^[a-z0-9!#$%&'*+\\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i;\n    this.loginForm = fb.group({\n      email: ['', Validators.compose([Validators.required, Validators.pattern(EMAIL_REGEXP)])],\n      password: ['', Validators.compose([Validators.minLength(6), Validators.required])]\n    });\n  }\n\n\n\n  login() {\n    let that = this;\n    if (!this.loginForm.valid) {\n      this.presentAlert('Username or password is incorrect')\n      console.log(\"error\");\n    } else {\n      let loadingPopup = this.loadingCtrl.create({\n        spinner: 'crescent',\n        content: ''\n      });\n      loadingPopup.present();\n\n      this.auth.loginWithEmailAndPass(this.loginForm.value.email, this.loginForm.value.password)\n        .then((credential:any) => {\n          console.log(\"Auth pass\");\n          loadingPopup.dismiss();\n          that.db.getDocumentsByName('users', credential.uid).then((u) => {\n            if (!u || credential.uid != u.uid) {\n              that.auth.signOut();\n            } else {\n                that.navCtrl.push('AfterLoginPage');\n            }\n          });\n        }).catch((e) => {\n\n          // .then(authData => {\n          //   console.log(\"Auth pass\");\n          //   loadingPopup.dismiss();\n          //   this.navCtrl.setRoot('AfterLoginPage', { data: authData });\n          // }\n\n          var errorMessage: string = e.message;\n          loadingPopup.dismiss().then(() => {\n            this.presentAlert(errorMessage)\n          });\n        });\n    }\n  }\n\n  recover() {\n    this.navCtrl.push('RecoverPage');\n  }\n\n  createAccount() {\n    this.navCtrl.push('RegisterPage');\n  }\n\n  presentAlert(title) {\n    let alert = this.alertCtrl.create({\n      title: title,\n      buttons: ['OK']\n    });\n    alert.present();\n  }\n\n\n  loginWithGooglePlus() {\n      this.auth.registerUserWithGoogle(() => {\n          this.navCtrl.push('AfterLoginPage');\n      })\n      .catch(err => {\n        alert(\"There is an error \" + JSON.stringify(err));\n      });\n  }\n\n  logout() {\n    this.auth.signOut();\n  }\n\n\n  ionViewDidLoad() {\n    let imgs = imagesSlide;\n      this.platform.ready().then(() => {\n          if (!!$) {\n              $('.v-slide').vegas({\n                  delay: 5000,\n                  shuffle: true,\n                  slides: imgs,\n                  //transition: [ 'zoomOut', 'burn' ],\n                  animation: ['kenburnsUp', 'kenburnsDown', 'kenburnsLeft', 'kenburnsRight']\n              });\n          }\n    });\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/login-workflow/login-pwa/login.ts"],"sourceRoot":""}