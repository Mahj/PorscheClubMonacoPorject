{"version":3,"sources":["../../src/pages/components/cart/checkout/checkout.module.ts","../../src/pages/components/cart/checkout/checkout.ts"],"names":[],"mappings":"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","file":"50.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CheckoutPage } from './checkout';\n\n@NgModule({\n  declarations: [\n    CheckoutPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(CheckoutPage),\n  ],\n  exports: [\n    CheckoutPage\n  ]\n})\nexport class CheckoutPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/cart/checkout/checkout.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController, AlertController, ToastController } from 'ionic-angular';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { AngularFireAuth } from \"angularfire2/auth\";\nimport { AngularFireDatabase } from \"angularfire2/database-deprecated\";\nimport { DatabaseProvider } from \"../../../../providers/database/database\";\n\n/**\n * Generated class for the CheckoutPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n@IonicPage()\n@Component({\n  selector: 'page-checkout',\n  templateUrl: 'checkout.html',\n})\nexport class CheckoutPage {\n    cartItems: any;\n    total: any;\n    address: any;\n    profileArray: any;\n    profilePicture: any;\n    profile: any;\n    phone: any;\n    name: any;\n    email: any;\n    uid: any;\n    checkoutForm: FormGroup;\n    showPaymentMethod: boolean = false;\n\n    constructor(public navCtrl: NavController, public navParams: NavParams, public fb: FormBuilder, public afAuth: AngularFireAuth, public afDb: AngularFireDatabase,\n        public loadingCtrl: LoadingController, public alertCtrl: AlertController, public db: DatabaseProvider, private toastCtrl: ToastController) {\n        this.checkoutForm = fb.group({\n            'fullname': [null, Validators.compose([Validators.required, Validators.minLength(5), Validators.maxLength(100)])],\n            'address': [null, Validators.compose([Validators.required, Validators.minLength(5), Validators.maxLength(500)])],\n            'email': [null, Validators.compose([Validators.required, Validators.minLength(5), Validators.maxLength(500)])],\n            'phone': [null, Validators.compose([Validators.required, Validators.minLength(5), Validators.maxLength(500)])],\n        });\n\n        this.total = this.navParams.get('total');\n        this.cartItems = this.navParams.get('items');\n  }\n\n    ionViewWillLoad() {\n        this.afAuth.authState.subscribe(userAuth => {\n            if (userAuth) {\n\n                this.db.getDocuments('checkoutProfile', ['uid', '==', userAuth.uid]).then((x) => {\n                    if (!!x) {\n                        let item = x[0];\n                        this.uid = item.uid;\n                        this.email = item.email;\n                        this.name = item.fullname;\n                        this.phone = item.phone;\n                        this.address = item.address;\n\n                        this.showPaymentMethod = true;\n                    } else {\n                        this.showPaymentMethod = false;\n                    }\n                });\n\n                \n            } else {\n\n                this.showLoginChoise();\n            }\n\n        });\n    }\n\n    saveCheckoutProfile(val) {\n\n        let obj = {\n            fullname: val.fullname,\n            address: val.address,\n            email: val.email,\n            phone: val.phone,\n            uid: this.uid\n        }\n        this.db.getDocuments('checkoutProfile', ['uid', '==', this.uid]).then((x) => {\n            if (!!x) {\n                let item = x[0];\n                this.db.updateDocument('checkoutProfile', item.$key, obj).then((x) => {\n                    this.showPaymentMethod = true;\n                    this.presentToast('Profile saved');\n                });\n            } else {\n                this.db.addDocument('checkoutProfile', obj).then((x) => {\n                    this.showPaymentMethod = true\n                    this.presentToast('Profile saved');\n                });\n            }\n        });\n    }\n\n    presentToast(text) {\n        const toast = this.toastCtrl.create({\n            message: text,\n            position: 'bottom',\n            duration: 3000\n        });\n        toast.present();\n    }\n\n    getDataFromLoggedUser() {\n        this.afAuth.authState.subscribe(userAuth => {\n\n            if (userAuth) {\n                \n                let loadingPopup = this.loadingCtrl.create({\n                    spinner: 'crescent',\n                    content: ''\n                });\n                loadingPopup.present();\n\n                this.profile = this.afDb.object('/userProfile/' + userAuth.uid);\n                this.profile.subscribe((profile) => {\n                    let p = (<any>profile);\n                    this.uid = userAuth.uid;\n                    this.email = userAuth.email;\n                    this.name = p.name;\n                    this.phone = p.phone;\n                    this.profilePicture = p.pic;\n                    this.profileArray = profile;\n                    loadingPopup.dismiss()\n                });\n            }\n        });\n    }\n\n    showLoginChoise() {\n        let prompt = this.alertCtrl.create({\n            title: 'Login',\n            message: \"You need to login to see your products in the cart, please select a login method\",\n\n            buttons: [\n                {\n                    text: 'Login',\n                    handler: data => {\n                        this.navCtrl.push('LoginPage');\n                    }\n                }\n            ]\n        });\n        prompt.present();\n    }\n\n    selectPaymentMethod() {\n        this.navCtrl.push('PaymentPage', { total: this.total, items: this.cartItems, name: this.name, email: this.email });\n    }\n\n }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/cart/checkout/checkout.ts"],"sourceRoot":""}